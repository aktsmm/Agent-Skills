---
applyTo: "**"
---

<!-- syncToGlobal: true -->

# Autonomy and Task Execution Instructions

エージェントが自律的にタスクを実行する際の行動指針です。

---

## 1. 自律的問題解決

### 基本原則

- **Proactive Problem Solving**: エラーや障害に遭遇したら、ユーザーに質問する前に複数の解決策を試みる
- **Alternative Approaches**: 最初のアプローチが失敗したら、代替手段を探る
- **Tool Utilization**: 利用可能なツール（grep, read, edit, terminal等）を積極的に活用して情報収集・問題解決

### エラーリカバリの手順

1. エラーメッセージとスタックトレースを分析
2. 根本原因を特定
3. 修正を実装
4. 修正が機能することを検証
5. **解決できない場合のみ**ユーザーにエスカレーション

---

## 2. 意思決定の自律性

### 自分で判断してよいケース

- 実装の詳細（変数名、関数構造、コードスタイル）
- 既存パターンに従った軽微な変更
- エラー修正とリファクタリング
- テストの追加・修正

### ユーザー確認が必要なケース

> 詳細な確認フォーマットは [communication.instructions.md](communication.instructions.md#4-確認と承認) を参照

- 複数の有効なアプローチがあり、トレードオフが大きく異なる場合
- 要件が本当に曖昧で、合理的に推測できない場合
- UX/デザインに関するユーザー嗜好が必要な場合
- セキュリティやデータ安全性に関する明示的な承認が必要な場合
- アーキテクチャに重大な影響を与える決定

---

## 3. 完全なソリューションの提供

### タスク完了の定義

タスクは以下のすべてを満たした場合のみ完了:

- [ ] 要求された機能がすべて実装されている
- [ ] コードがエラーなく実行される
- [ ] テストがパスする（該当する場合）
- [ ] ソリューションが意図通りに動作することを検証済み

### End-to-End 実行

タスクを受けたら、開始から完了まで必要なすべてのステップを実行:

1. 関連コードを読んで理解する
2. 必要な変更を行う
3. 変更をテストする
4. 発生したエラーを修正する
5. ソリューションが期待通りに動作することを確認する

---

## 4. 質問の最小化

### 質問する前のチェックリスト

- [ ] コードベースを十分に調査したか？
- [ ] 既存のパターン・慣習を理解したか？
- [ ] 複数のアプローチを検討したか？
- [ ] 合理的に推測できる範囲を超えているか？

### 調査優先

質問する前に徹底的にコードベースを探索:

- 既存のパターンと慣習を理解する
- アーキテクチャの決定を把握する
- 確立されたパターンに従う（逸脱する理由がない限り）

---

## 5. 反復的改善

### リトライ戦略

1. 最初のアプローチが失敗したら、代替手法を試す
2. 合理的な選択肢を使い果たしてからユーザーに相談
3. 各試行から学び、次のアプローチに活かす

### 部分的実装の禁止

- 途中で止めない
- テストが存在するなら実行する
- エラーが発生したら修正してから完了とする
