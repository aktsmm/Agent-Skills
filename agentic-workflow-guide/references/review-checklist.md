# Review Checklist

エージェントワークフローのレビューチェックリスト。

## 使い方

1. ワークフロー設計完了後にこのチェックリストを確認
2. 各項目を ✅ または ❌ でマーク
3. ❌ がある場合は対策を検討
4. 全て ✅ になるまで改善

---

## クイックチェック（5 分）

最低限確認すべき項目：

```markdown
- [ ] 各エージェントは 1 つの責務に集中しているか？ (SRP)
- [ ] エラー時に即座に検知・停止できるか？ (Fail Fast)
- [ ] 小さなステップに分割されているか？ (Iterative)
- [ ] 各ステップで成果を確認できるか？ (Feedback Loop)
- [ ] 無限ループの可能性はないか？
```

---

## 詳細チェック

### コア原則チェック

```markdown
## SSOT (Single Source of Truth)

- [ ] 同じ情報が複数箇所で定義されていないか？
- [ ] 設定・コンテキストは一元管理されているか？
- [ ] 情報の更新が全体に反映される仕組みがあるか？

## SRP (Single Responsibility Principle)

- [ ] 各エージェントは 1 つの責務に集中しているか？
- [ ] 責務の境界は明確か？
- [ ] エージェント間の役割重複はないか？

## Simplicity First

- [ ] 最もシンプルな解になっているか？
- [ ] 不要なエージェントやステップはないか？
- [ ] より単純な方法で達成できないか？

## Fail Fast

- [ ] エラー時に即座に検知できるか？
- [ ] エラー時に適切に停止できるか？
- [ ] エラーメッセージは明確か？

## Iterative Refinement

- [ ] 小さなステップに分割されているか？
- [ ] 各ステップで検証できるか？
- [ ] 段階的に改善できる構造か？

## Feedback Loop

- [ ] 各ステップで成果を確認できるか？
- [ ] フィードバックを次のステップに活かせるか？
- [ ] 改善のサイクルが回る構造か？
```

### 品質原則チェック

```markdown
## Transparency

- [ ] 計画・進捗が可視化されているか？
- [ ] 何をしているかユーザーに伝わるか？
- [ ] ログは十分に出力されるか？

## Gate/Checkpoint

- [ ] 各ステップで検証しているか？
- [ ] 次に進む条件は明確か？
- [ ] 検証失敗時の処理は定義されているか？

## DRY (Don't Repeat Yourself)

- [ ] 共通処理は再利用されているか？
- [ ] プロンプトテンプレートを活用しているか？
- [ ] 同じロジックの重複はないか？

## ISP (Interface Segregation Principle)

- [ ] 必要最小限の情報だけ渡しているか？
- [ ] 不要なコンテキストを含めていないか？
- [ ] 各エージェントに必要な情報は明確か？

## Idempotency

- [ ] リトライしても安全か？
- [ ] 同じ操作を複数回実行しても結果は同じか？
- [ ] 副作用は管理されているか？
```

### スケール・安全性チェック

```markdown
## Human-in-the-Loop

- [ ] 重要な決定に人間確認が必要か？
- [ ] リスクの高い操作前に確認があるか？
- [ ] 自動化と人間判断のバランスは適切か？

## 終了条件

- [ ] 無限ループの可能性はないか？
- [ ] 最大イテレーション数は設定されているか？
- [ ] タイムアウトは設定されているか？

## エラーハンドリング

- [ ] エラー処理が欠落していないか？
- [ ] 予期しないエラーへの対応はあるか？
- [ ] リカバリ手順は定義されているか？

## セキュリティ

- [ ] 機密情報の取り扱いは適切か？
- [ ] 権限は最小限に設定されているか？
- [ ] 監査ログは取得できるか？
```

---

## アンチパターン検出

以下に該当する場合は設計を見直す：

```markdown
- [ ] **God Agent**: 1 つのエージェントに責務を詰め込みすぎていないか？
      → SRP で分割

- [ ] **Context Overload**: コンテキストを過剰に渡していないか？
      → ISP で最小化

- [ ] **Silent Failure**: エラーを無視して続行していないか？
      → Fail Fast で即停止

- [ ] **Infinite Loop**: 終了条件なしのループはないか？
      → 最大イテレーション設定

- [ ] **Big Bang**: 一度に大きく作ろうとしていないか？
      → Iterative で小さく回す

- [ ] **Premature Optimization**: 必要以上に複雑にしていないか？
      → Simplicity First を適用
```

---

## レビュー結果テンプレート

```markdown
# ワークフローレビュー結果

## 概要

- **ワークフロー名**:
- **レビュー日**:
- **レビュアー**:

## チェック結果

### コア原則

| 原則                 | 結果  | コメント |
| -------------------- | ----- | -------- |
| SSOT                 | ✅/❌ |          |
| SRP                  | ✅/❌ |          |
| Simplicity First     | ✅/❌ |          |
| Fail Fast            | ✅/❌ |          |
| Iterative Refinement | ✅/❌ |          |
| Feedback Loop        | ✅/❌ |          |

### 品質原則

| 原則            | 結果  | コメント |
| --------------- | ----- | -------- |
| Transparency    | ✅/❌ |          |
| Gate/Checkpoint | ✅/❌ |          |
| DRY             | ✅/❌ |          |
| ISP             | ✅/❌ |          |
| Idempotency     | ✅/❌ |          |

### アンチパターン

| パターン         | 検出  | 対策 |
| ---------------- | ----- | ---- |
| God Agent        | ✅/❌ |      |
| Context Overload | ✅/❌ |      |
| Silent Failure   | ✅/❌ |      |
| Infinite Loop    | ✅/❌ |      |
| Big Bang         | ✅/❌ |      |

## 改善提案

1.
2.
3.

## 総合評価

- [ ] 承認
- [ ] 条件付き承認（軽微な修正後）
- [ ] 要修正
```

---

## 次のステップ

レビュー完了後：

1. **全て ✅** → 実装へ進む
2. **軽微な ❌** → 修正後に再確認
3. **重大な ❌** → 設計を見直し、再レビュー
